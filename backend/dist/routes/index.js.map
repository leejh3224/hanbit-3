{"version":3,"sources":["../../src/routes/index.js"],"names":["routes","Router","storage","diskStorage","destination","filename","req","file","cb","pseudoRandomBytes","err","raw","toString","extension","mimetype","upload","post","single","res","send"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,MAAMA,SAAS,kBAAQC,MAAR,EAAf;;AAEA,MAAMC,UAAU,iBAAOC,WAAP,CAAmB;AACjCC,eAAa,yBADoB;AAEjCC,YAAU,CAACC,GAAD,EAAMC,IAAN,EAAYC,EAAZ,KAAmB;AAC3B,qBAAOC,iBAAP,CAAyB,EAAzB,EAA6B,CAACC,GAAD,EAAMC,GAAN,KAAc;AACzC,UAAID,GAAJ,EAAS,OAAOF,GAAGE,GAAH,CAAP;AACTF,SAAG,IAAH,EAASG,IAAIC,QAAJ,CAAa,KAAb,IAAsB,GAAtB,GAA4B,oBAAKC,SAAL,CAAeN,KAAKO,QAApB,CAArC;AACD,KAHD;AAID;AAPgC,CAAnB,CAAhB;;AAUA,MAAMC,SAAS,sBAAO,EAAEb,OAAF,EAAP,CAAf;AACAF,OAAOgB,IAAP,CAAY,GAAZ,EAAiBD,OAAOE,MAAP,CAAc,KAAd,CAAjB,EAAuC,CAACX,GAAD,EAAMY,GAAN,KAAc;AACnDA,MAAIC,IAAJ,CAAS,SAAT;AACD,CAFD;;kBAIenB,M","file":"index.js","sourcesContent":["import express from 'express'\nimport multer from 'multer'\nimport mime from 'mime-types'\nimport crypto from 'crypto'\n\nconst routes = express.Router()\n\nconst storage = multer.diskStorage({\n  destination: '../frontend/src/static/',\n  filename: (req, file, cb) => {\n    crypto.pseudoRandomBytes(16, (err, raw) => {\n      if (err) return cb(err)\n      cb(null, raw.toString('hex') + '.' + mime.extension(file.mimetype))\n    })\n  },\n})\n\nconst upload = multer({ storage })\nroutes.post('/', upload.single('img'), (req, res) => {\n  res.send('success')\n})\n\nexport default routes\n"]}