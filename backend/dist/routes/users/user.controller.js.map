{"version":3,"sources":["../../../src/routes/users/user.controller.js"],"names":["exports","findUserByEmail","req","res","email","params","findOne","then","user","json","available","logout","console","log","sessionID","redirect","destroy","clearCookie","session"],"mappings":";;AAAA;;;;AACA;;;;AAEAA,QAAQC,eAAR,GAA0B,CAACC,GAAD,EAAMC,GAAN,KAAc;AACtC,QAAM,EAAEC,KAAF,KAAYF,IAAIG,MAAtB;;AAEA,SAAO,eAAKC,OAAL,CAAa,EAAEF,KAAF,EAAb,EACKG,IADL,CACUC,QAAQ;AACZ,QAAI,CAACA,IAAL,EAAW;AACTL,UAAIM,IAAJ,CAAS,EAAEC,WAAW,IAAb,EAAT;AACD,KAFD,MAEO;AACLP,UAAIM,IAAJ,CAAS,EAAEC,WAAW,KAAb,EAAT;AACD;AACF,GAPL,CAAP;AAQD,CAXD;;AAaAV,QAAQW,MAAR,GAAiB,CAACT,GAAD,EAAMC,GAAN,KAAc;AAC7BS,UAAQC,GAAR,CAAYX,GAAZ,EAAiBC,GAAjB;AACA,MAAI,CAACD,IAAIY,SAAT,EAAoB;AAClBX,QAAIY,QAAJ,CAAa,GAAb;AACD;AACD,cAAMC,OAAN,CAAcd,IAAIY,SAAlB,EAA6B,MAAM;AACjCX,QAAIc,WAAJ,CAAgB,MAAhB;AACAf,QAAIgB,OAAJ,CAAYF,OAAZ,CAAoB,MAAM;AACxBJ,cAAQC,GAAR,CAAY,QAAZ;AACAV,UAAIY,QAAJ,CAAa,GAAb;AACD,KAHD;AAID,GAND;AAOD,CAZD","file":"user.controller.js","sourcesContent":["import User from '../../models/User'\nimport { store } from '../../sess'\n\nexports.findUserByEmail = (req, res) => {\n  const { email } = req.params\n\n  return User.findOne({ email })\n             .then(user => {\n               if (!user) {\n                 res.json({ available: true })\n               } else {\n                 res.json({ available: false })\n               }\n             })\n}\n\nexports.logout = (req, res) => {\n  console.log(req, res)\n  if (!req.sessionID) {\n    res.redirect('/')\n  }\n  store.destroy(req.sessionID, () => {\n    res.clearCookie('user')\n    req.session.destroy(() => {\n      console.log('bbbbbb')\n      res.redirect('/')\n    })\n  })\n}"]}