{"version":3,"sources":["../src/app.js"],"names":["app","use","skip","get","json","urlencoded","extended","req","res","next","console","log","url","static","join","__dirname","sendFile","err","Error","status","message"],"mappings":";;;;;;AAAA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AAEA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AAEA,MAAMA,MAAM,wBAAZ;AACAA,IAAIC,GAAJ,CAAQ,uBAAR;;AAEAD,IAAIC,GAAJ,CAAQ,sBAAO,KAAP,EAAc;AACpBC,QAAM,MAAMF,IAAIG,GAAJ,CAAQ,KAAR,MAAmB;AADX,CAAd,CAAR;;AAIA;AACA;AACAH,IAAIC,GAAJ,CAAQ,6BAAR;AACAD,IAAIC,GAAJ,CAAQ,6CAAR;AACAD,IAAIC,GAAJ,CAAQ,qBAAWG,IAAX,EAAR;AACAJ,IAAIC,GAAJ,CAAQ,qBAAWI,UAAX,CAAsB,EAAEC,UAAU,KAAZ,EAAtB,CAAR;AACA,wBAAeN,GAAf;;AAEA;AACAA,IAAIC,GAAJ,CAAQ,QAAR;AACAD,IAAIC,GAAJ,CAAQ,WAAR;;AAEAD,IAAIC,GAAJ,CAAQ,CAACM,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC1BC,UAAQC,GAAR,CAAYJ,IAAIK,GAAhB;AACAH;AACD,CAHD;AAIAT,IAAIC,GAAJ,CAAQ,EAAR,EAAY,kBAAQY,MAAR,CAAe,eAAKC,IAAL,CAAUC,SAAV,EAAqB,sBAArB,CAAf,CAAZ;AACAf,IAAIG,GAAJ,CAAQ,GAAR,EAAa,CAACI,GAAD,EAAMC,GAAN,KAAc;AACzBA,MAAIQ,QAAJ,CAAa,eAAKF,IAAL,CAAUC,SAAV,EAAqB,iCAArB,CAAb;AACD,CAFD;;AAIA;AACAf,IAAIC,GAAJ,CAAQ,CAACM,GAAD,EAAMC,GAAN,EAAWC,IAAX,KAAoB;AAC1B,QAAMQ,MAAM,IAAIC,KAAJ,CAAU,WAAV,CAAZ;AACAD,MAAIE,MAAJ,GAAa,GAAb;AACAV,OAAKQ,GAAL;AACD,CAJD;;AAMA;AACAjB,IAAIC,GAAJ,CAAQ,CAACgB,GAAD,EAAMV,GAAN,EAAWC,GAAX,EAAgBC,IAAhB,KAAyB;AAAE;AACjCD,MACGW,MADH,CACUF,IAAIE,MAAJ,IAAc,GADxB,EAEGf,IAFH,CAEQ;AACJa,SAAKA,IAAIG;AADL,GAFR;AAKD,CAND;;kBAQepB,G","file":"app.js","sourcesContent":["import express from 'express'\nimport logger from 'morgan'\nimport bodyParser from 'body-parser'\nimport helmet from 'helmet'\nimport cookieParser from 'cookie-parser'\nimport session from 'express-session'\nimport passport from 'passport'\nimport path from 'path'\n\nimport userRouter from './routes/users'\nimport productRouter from './routes/products'\nimport connectDB from './models'\nimport passportConfig from './passport'\nimport sess from './sess'\nimport config from './config'\n\nconst app = express()\napp.use(helmet())\n\napp.use(logger('dev', {\n  skip: () => app.get('env') === 'test'\n}))\n\n// connect db\nconnectDB()\napp.use(cookieParser())\napp.use(session(sess))\napp.use(bodyParser.json())\napp.use(bodyParser.urlencoded({ extended: false }))\npassportConfig(app, passport)\n\n// Routes\napp.use('/users', userRouter)\napp.use('/products', productRouter)\n\napp.use((req, res, next) => {\n  console.log(req.url)\n  next()\n})\napp.use('', express.static(path.join(__dirname, '../../frontend/build')))\napp.get('*', (req, res) => {\n  res.sendFile(path.join(__dirname, '../../frontend/build/index.html'))\n})\n\n// Catch 404 and forward to error handler\napp.use((req, res, next) => {\n  const err = new Error('Not Found')\n  err.status = 404\n  next(err)\n})\n\n// Error handler\napp.use((err, req, res, next) => { // eslint-disable-line no-unused-vars\n  res\n    .status(err.status || 500)\n    .json({\n      err: err.message,\n    })\n})\n\nexport default app\n"]}